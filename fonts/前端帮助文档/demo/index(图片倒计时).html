<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style type="text/css">
	/*全局定义
	.............................*/
	#page,#content{ width:100%;}
	body, .ln_Container ul, .ln_Container ol, .ln_Container li, .ln_Container p{margin:0;padding:0;}
	.ln_Container img{border:0;display:block;}
	.ln_Container a{ text-decoration:none; border:none;}
	.ln_Container ul{ list-style:none;}
	.ln_Container em{ font-style:normal;}
	.ln_Container .clearfix:after {content:".";display:block;clear:both;height:0;visibility:hidden;}
    .ln_Container .clearfix {zoom:1;}	
			/*局部定义
	.............................*/
	.ln_Container{ background:#fff url(images/hwbg_01.jpg) no-repeat center 0;width:100%; font-size:12px; color:#fff;}
	.ln_Container .ln_header,.ln_Container .ln_main{width:990px;margin:0 auto;}

.djs{margin:0 auto;width:450px;height:69px;overflow:hidden;}
.djs ul,.djs li{margin:0;padding:0;}
.djs ul{list-style:none;}
.djs .text{float:left;height:69px;line-height:69px;overflow:hidden;}
.djs .time{float:left;padding-right:1px;height:69px;width:36px;overflow:hidden;}
.djs .ln_left{margin-left:43px;}
.djs .number .item{float:left;width:36px;height:69px;line-height:69px;text-align:center;font-family:'微软雅黑';font-size:16px;color:#000; margin-right:10px;}




</style>	
</head>

<body>
<div class="ln_Container">
	<div class="ln_header">
        <div class="ln_date">
         <cms:custom title="倒计时" group="倒计时" fields="months:开始月:string,day:开始日:string,year1:结束年:string,months1:结束月:string,day1:结束日:string," name="5688e296-fc54-44f8-9181-899f87cd0c0d">
        	<span >$!months月$!day日</span><span class="ln_top"><img src="www.jpg" /></span><span id="datebox" data-time="2012/11/29 00:00:00">$!months1月$!day1日</span>
          </cms:custom>
        </div>
        <div class="djs" id="djs">
            <div class="time">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time ln_left">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time ln_left">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time ln_left">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
            <div class="time">
                <ul class="number">
                    <li class="item"><img src="images/0.png" /></li>
                    <li class="item"><img src="images/1.png" /></li>
                    <li class="item"><img src="images/2.png" /></li>
                    <li class="item"><img src="images/3.png" /></li>
                    <li class="item"><img src="images/4.png" /></li>
                    <li class="item"><img src="images/5.png" /></li>
                    <li class="item"><img src="images/6.png" /></li>
                    <li class="item"><img src="images/7.png" /></li>
                    <li class="item"><img src="images/8.png" /></li>
                    <li class="item"><img src="images/9.png" /></li>
                    <li class="item"><img src="images/0.png" /></li>
                </ul>
            </div>
		</div>
    </div>
</div>
<script type="text/javascript">
(function(){
	var datetime=document.getElementById("datebox").getAttribute('data-time');
	var e = new Date(datetime);
	var times = document.getElementById("djs").getElementsByTagName("div");
	var len = times.length;
	var h = 69;
	var s = 0;
	var delta = 0.08;
	var t = [null,null,null,null,null,null,null,null];
	var flag = true;
	if(window.navigator.userAgent.indexOf("MSIE") != -1){delta = 0.2;}
	function countDown(n,num){
		if(t[n]){clearInterval(t[n]);t[n] = null;}
		if(num == 0 && times[n].scrollTop == 10 * h) return;
		var st = times[n].scrollTop;
		var dis = num * h - st;
		
		t[n] = setInterval(function(){
			s = dis * delta;
			s = s > 0 ? Math.ceil(s) : Math.floor(s);
			if(Math.abs(s) > 0){
				times[n].scrollTop += s;
				console.log(times[n].scrollTop)
				dis -= s;
			}else{
				clearInterval(t[n]);
				t[n] = null;
				if(num == 0){times[n].scrollTop = 10 * h;}
			}
		},10);
	};
	setInterval(function(){
		var s = new Date();
		var d = Math.floor((e.getTime() - s.getTime()) / 1000);
		if(d <= 0){return;}
		var dArr = [];
		
		var day = Math.floor(d / (3600 * 24));
		day = day < 10 ? "0" + day : day;
		d = d % (3600 * 24);
		
		var H = Math.floor(d / 3600);
		H = H < 10 ? "0" + H : H;
		d = d % 3600;
		
		var I = Math.floor(d / 60);
		I = I < 10 ? "0" + I : I;
		d = d % 60;
		
		var S = Math.floor(d);
		S = S < 10 ? "0" + S : S;
		
		dArr[0] = day.toString().split("")[0];
		dArr[1] = day.toString().split("")[1];
		dArr[2] = H.toString().split("")[0];
		dArr[3] = H.toString().split("")[1];
		dArr[4] = I.toString().split("")[0];
		dArr[5] = I.toString().split("")[1];
		dArr[6] = S.toString().split("")[0];
		dArr[7] = S.toString().split("")[1];
		
		if(flag){
			for(var i = 0; i < len; i++){
				times[i].scrollTop = 0;
			}
			flag = false;
		}
		for(var i = 0; i < len; i++){
			countDown(i,dArr[i]);
		}
	},1000);
})();
</script>
</body>
</html>
